/*
 * @tfairane
 * gcc -Wall -ldl -shared -o strcmp.so strcmp.c
 * export LD_PRELOAD=/path/strcmp.so
 */
#define _GNU_SOURCE
#include <dlfcn.h>
#include <stdio.h>

typedef int (*porig_strcmp)(const char*, const char*);
int strcmp( const char * str1, const char * str2 ) {
    printf("str1 : %s\n", str1);
    printf("str2 : %s\n", str2);

    porig_strcmp orig_strcmp = (porig_strcmp) dlsym(RTLD_NEXT, "strcmp");
    return orig_strcmp(str1, str2);
}
